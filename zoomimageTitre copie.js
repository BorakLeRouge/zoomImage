////  Fonction de diaporama sur des images//  //  Appel se fait d'une maniere simple : ajout d'une classe zoomimage sur un lien ou une image////  <a href="xxx" class="zoomimage"><img src=xxx"></a>//  <img src="xxx" class="zoom image" />//// ----- Les variables de travail, Permanente -----var ZoomImagCour = '1' ;var ZoomImagPrec = '2' ;var zoomimagePHOTO  = new Array() ;var zoomimageTITRE  = new Array() ; var zoomimageCOUNT = 0 ;var zoomimagePLAY  = false ;var zoomimagePOS   = -1 ;var zoomimageInactClick = false ;// ----- Recale la position si on déborde à droite ou a gauche -----function zoomimage_recadrepos(pos){ var rep = pos ;  if (pos < 1) { rep = zoomimageCOUNT ; }  if (pos > zoomimageCOUNT) { rep = 1 ; }  return rep ;}// ----- Diaporama, affichage image + 1 -----function zoomimage_diapo(pos){  if (pos == zoomimagePOS && zoomimagePLAY)   {  zoomimage(pos + 1) ;    }}// ----- Bascule Diaporama ON / OFF -----function zoomimage_btplay(pos){  zoomimageInactClick = true ;   zoomimagePLAY = !zoomimagePLAY ;   if (zoomimagePLAY)   {  document.getElementById("zoomimage_play"+ZoomImagCour).src ="zoomimage_pause.png" ;       setTimeout("zoomimage_diapo("+pos+")", 200);   }   else   {  document.getElementById("zoomimage_play"+ZoomImagCour).src = "zoomimage_play.png" ;   }}// ----- Zoom sur une image -----function zoomimage(pos)  { // * * Affichage du fond * *        zoomimagePOS = zoomimage_recadrepos(pos) ;     var zoomimg = zoomimagePHOTO[zoomimagePOS]    // * * Bascule sur 1 ou 2 * *    if (ZoomImagCour == '1') { ZoomImagCour = '2' ; ZoomImagPrec = '1' ; }    else                     { ZoomImagCour = '1' ; ZoomImagPrec = '2' ; }    // * * Fermeture Div Prec * *     if ( $("#zoomimage_cadre_"+ZoomImagPrec).is(":visible")) { $("#zoomimage_cadre_"+ZoomImagPrec).fadeOut("fast") ; }    // * * Préparation contenu du DIV * *    LeCont =  '<img src="' + zoomimg + '" alt="" id="zoomimage_image_'+ZoomImagCour+'" onload="zoomimage_chargimg(' + (zoomimagePOS) + ');" onclick="zoomimageCL(' + (zoomimagePOS + 1) + ');" />' ;    if (zoomimageCOUNT > 1)    {  LeCont += '<img src="zoomimage_croix.png" alt="fermer" class="zoomimage_croix" onclick="zoomimage_Fermer();" />' ;       LeCont += '<img src="zoomimage_gauche.png" alt="<-" class="zoomimage_gauche" onclick="zoomimageCL(' + (zoomimagePOS - 1) + ');" />' ;       if (zoomimagePLAY)       {  LeCont += '<img src="zoomimage_pause.png" alt="Pause" id="zoomimage_play'+ZoomImagCour+'" class="zoomimage_play" onclick="zoomimage_btplay(' + (zoomimagePOS) + ');" />' ; }       else       {  LeCont += '<img src="zoomimage_play.png" alt="Play" id="zoomimage_play'+ZoomImagCour+'" class="zoomimage_play" onclick="zoomimage_btplay(' + (zoomimagePOS) + ');" />' ; }       LeCont += '<img src="zoomimage_droite.png" alt="->" class="zoomimage_droite" onclick="zoomimageCL(' + (zoomimagePOS + 1) + ');" />' ;    }    // * * Affichage * *    $('#zoomimage_fond').show() ;    $("#zoomimage_cadre_0").show() ;    var ZeObjDiv = $("#zoomimage_cadre_"+ZoomImagCour) ;    ZeObjDiv.hide() ;    ZeObjDiv.css("left", '-9000px') ;    ZeObjDiv.css("top", '-9000px') ;    ZeObjDiv.html(LeCont) ;       // * * Test Affichage * *    //ZeObjDiv.css("top", '0') ;    //ZeObjDiv.css("left", '0') ;     //ZeObjDiv.show() ;  }function zoomimageCL(pos)  {  if (zoomimageCOUNT > 1)     {  zoomimageInactClick = true ;        zoomimage(pos) ;     } else {        zoomimage_Fermer()     }  }// ----- image chargée (inLoad) il faut l'afficher -----function zoomimage_chargimg(pos)  { if (pos != zoomimagePOS) { return ; }    $("#zoomimage_cadre_0").hide() ;    var ZeObjDiv = $("#zoomimage_cadre_"+ZoomImagCour) ;    ZeObjDiv.css("top", '0') ;    ZeObjDiv.css("left", '0') ;     ZeObjDiv.fadeIn() ;    var titr = $("#zoomimage_titre") ;    titr.html(zoomimageTITRE[pos]) ;    titr.show() ;    // Prechargement du suivant    var suiv = new Image() ;    suiv.src = zoomimagePHOTO[zoomimage_recadrepos(pos + 1)] ;    // Diaporama auto    if (zoomimagePLAY)    {  setTimeout("zoomimage_diapo("+pos+")", 4000);    }  }// ----- Fermer le diaporama -----function zoomimage_Fermer(){  zoomimagePOS = -1 ;   $("#zoomimage_cadre_1").fadeOut("fast") ;   $("#zoomimage_cadre_2").fadeOut("fast") ;   $("#zoomimage_fond").fadeOut("fast") ;   zoomimagePLAY  = false ;}function zoomimage_FondFermer(){  if (!zoomimageInactClick)   {  zoomimage_Fermer()   }   zoomimageInactClick = false ;}// ----- Base d'affichage et de mise en place du diaporama -----function zoomimage_placezoom(){  var temp, t1, t2, p ;   $(".zoomimage").each(function()      {  if (this.tagName == 'A')         {  zoomimageCOUNT++ ;            var i = zoomimageCOUNT ;            zoomimagePHOTO[zoomimageCOUNT] = this.href ;            temp = this.nextSibling.nextSibling.innerHTML ;             p  = temp.indexOf("<br") ;            t1 = temp.substr(0, p) ;            t2 = temp.substr(p) ;              p  = t2.indexOf(">") + 1            zoomimageTITRE[zoomimageCOUNT] = t1 + " - " + t2.substr(p) ;             if (zoomimageTITRE[zoomimageCOUNT] == ' - ') { zoomimageTITRE[zoomimageCOUNT] = '' } ;             this.onclick = function() { zoomimage(i) ; return false ; }         }      }   )   // --- Chargement en cours   document.write('<div id="zoomimage_fond" style="display:none" onclick="zoomimage_FondFermer();" >') ;   document.write('<div id="zoomimage_cadre_0" style="display:none" >') ;   document.write('<p>Loading . . .<br />') ;   document.write('<img src="zoomimage_loader.gif" alt="En chargement ..." /></p>') ;   document.write('</div>') ;   // --- Prepar Image    document.write('<div id="zoomimage_cadre_1" style="display:none" ></div>') ;   // --- Affich Image 2   document.write('<div id="zoomimage_cadre_2" style="display:none" ></div>') ;   document.write('<div id="zoomimage_titre"   style="display:none"></div') ;   document.write('</div>') ;}// ----- Affichagezoomimage_placezoom();